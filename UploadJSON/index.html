<!DOCTYPE html>
<html ng-app="TestUploadFile">

	<head>
		<!-- Encodage -->
		<meta charset="utf-8" />
		
		<!-- Feuille de style -->
		<link rel="stylesheet" type="text/css" href="styleDSQ.css">
		
		<!-- Bootstrap -->
		<link data-require="bootstrap-css@3.0.0-rc2" data-semver="3.0.0-rc2" rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/css/bootstrap.min.css" />
		
		<!-- AngularJS -->
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>
		<script src="https://cdn.gitcdn.link/cdn/angular/bower-material/v1.1.5/angular-material.js"></script>
		
		<!-- ng-table -->
		<link rel="stylesheet" href="http://cdn.jsdelivr.net/angular.ngtable/0.3.2/ng-table.css">
        <script src="http://cdn.jsdelivr.net/angular.ngtable/0.3.2/ng-table.js"></script>

		<title>PI Pharmagest</title>
		<script>document.write('<base href="' + document.location + '" />');</script>
		<link rel="stylesheet" href="styleDSQ.css" />
		<script data-require="angular.js@1.0.x" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js" data-semver="1.0.8"></script>
		<script> 
			var app = angular.module('TestUploadFile', ["ngTable"]);
		</script>

		<script src="upload.js"></script>
		<script src="app.js"></script>
	</head>

	<body>
 
		<div ng-controller="JsonUploadController " class="container">
			<h1>Upload du Json</h1>
			<form>
				<input type="file" read-text="onFileSelect($files)" >
				<!-- <input type="file" ng-file-select="onFileSelect($files)" multiple> -->	
			</form>
			<b>Aperçu du json :</b><br />
			<i ng-hide="jsonSrc">Aucun json sélectionné</i>

			<div id="conteneur">
				<!--
				<div ng-show="jsonSrc" class="col-md-6">
					<ul ng-repeat="ligne in lignes">{{ligne}}</ul>
				</div>
				-->
				
				<div ng-show="jsonSrc" style class="col-md-6">

					<!--
					Keys : 
						
						<ul>
							<li ng-repeat="key in keys">
								{{key}}
							</li>
						</ul>
					-->
						
					<!--
					Values de la première ligne :

						<ul>
							<li ng-repeat="value in values">
								{{value}}
							</li>
						</ul>
					-->

					<div>
						Select X : 
						<select ng-model="selectedX">
							<option ng-repeat="key in keys" value="{{key}}">{{key}}</option>
						</select>
							
						<br><br>
							
						Selected X Attribute : {{selectedX}}
						<br>
						<!-- X values : {{getValues(selectedX)}} -->
							
						<br><br>
							
						Select Y : 
						<select ng-model="selectedY">
							<option ng-repeat="key2 in keys" value="{{key2}}">{{key2}}</option>
						</select>
							
						<br><br>
							
						Selected Y Attribute : {{selectedY}}
						<br>
						<!-- Y values : {{getValues(selectedY)}} -->
							
						<br><br>
						
						<table>
							<tr>
									<th>{{selectedX}}</th>
									<td ng-repeat="key in getValues(selectedX)">{{ key }}</td>
							</tr>
							<tr>
									<th>{{selectedY}}</th>
									<td ng-repeat="key2 in getValues(selectedY)">{{ key2 }}</td>
							</tr>
						</table>
						
						<table ng-table="usersTable" show-filter="true" class="table table-striped">
						   <tr ng-repeat="user in data">
							   <td data-title="'Id'" sortable="'id'">
								   {{user.id}}
							   </td>
							   <td data-title="'First Name'" sortable="'first_name'" filter="{ 'first_name': 'text' }">
								   {{user.first_name}}
							   </td>
							   <td data-title="'Last Name'" >
								   {{user.last_name}}
							   </td>    
							   <td data-title="'e-mail'" >
								   {{user.email}}
							   </td>    
							   <td data-title="'Country'">
								   {{user.country}}
							   </td>    
							   <td data-title="'IP'" >
								   {{user.ip_address}}
							   </td>    
						   </tr>
						</table>
						
					</div>
				</div>
			</div> 
		</div>

	</body>

</html>
